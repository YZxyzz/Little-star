# APP功能规格说明

## 一、产品定位

### 1.1 APP角色

**小星伴父母APP** 是父母端的核心入口，承载以下职责：

| 职责 | 描述 |
|------|------|
| **设备管理** | 配对、设置、固件更新 |
| **内容接收** | 接收硬件双模数据：主动对话(高优先) + 被动监听(背景佐证) |
| **报告查看** | 查看每日/周/月成长报告 |
| **教育指导** | 获取与孩子互动的建议 |
| **档案管理** | 长期成长档案的存储和回顾 |

### 1.2 目标用户

| 用户类型 | 特点 | 核心需求 |
|---------|------|---------|
| **主要用户** | 3-7岁孩子的父母 | 了解孩子、学习如何沟通 |
| **次要用户** | 祖父母、保姆 | 查看孩子动态 |

### 1.3 使用场景

| 场景 | 时间 | 用户行为 |
|------|------|---------|
| 晨间设备检查 | 早上 | 确认设备电量、网络状态 |
| 工作间隙查看 | 白天 | 收到推送后查看孩子对话摘要 |
| **晚间报告阅读** | 晚上 | 详细阅读每日报告，学习互动建议 |
| 周末回顾 | 周末 | 查看周报，规划亲子活动 |

---

## 二、功能清单

### 2.1 核心功能（P0 - Must Have）

#### F0: 登录与注册

> **更新日期**：2025-02-05
> **重要性**：所有功能的前置条件

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **启动画面** | 品牌Logo展示，1.5-2秒 | 作为用户，我希望快速启动APP，同时感受到品牌专业性 |
| **欢迎页** | 首次打开展示产品价值点和IP形象 | 作为新用户，我希望快速了解产品能帮我做什么 |
| **手机号登录** | 手机号+验证码快速登录/注册 | 作为用户，我希望不用记住密码，快速登录 |
| **微信登录** | 微信一键授权登录 | 作为用户，我希望有更便捷的登录方式 |
| **协议确认** | 勾选用户协议和隐私政策 | 作为用户，我希望了解我的数据如何被使用 |

**未登录状态**：
- 只能访问：启动画面、欢迎页、登录页
- 不能访问：任何需要账号的功能

#### F1: 设备绑定与管理

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **绑定引导页** | 登录后无设备时显示，引导开始绑定 | 作为新用户，我希望清楚知道下一步该做什么 |
| **创建孩子档案** | 绑定第一步，填写孩子基本信息 | 作为父母，我希望AI能了解我的孩子 |
| **设备配对** | BLE扫描+配对，长按激活+APP自动发现 | 作为父母，我希望能快速连接设备 |
| **连接状态** | 显示连接进度和状态 | 作为父母，我希望知道连接是否成功 |
| **流量激活** | 激活设备内置蜂窝流量卡（首年免费） | 作为父母，我希望设备开箱即用 |
| **激活成功动画** | 绑定完成后的炫酷庆祝动画 | 作为父母，我希望有成就感和仪式感 |
| **设备状态** | 查看电量、网络信号、流量余额 | 作为父母，我希望随时知道设备状态 |
| **固件更新** | OTA更新设备固件 | 作为父母，我希望设备能自动保持最新 |
| **设备解绑** | 解除设备与账号的绑定关系 | 作为父母，我希望能更换或转让设备 |

**已登录未绑定状态**：
- 只能访问：绑定引导页、绑定流程
- 不能访问：首页、记录、我的（完整功能）

#### F2: 实时消息

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **对话通知** | 孩子有大量对话后推送摘要 | 作为父母，我希望及时知道孩子在聊什么 |
| **消息列表** | 查看历史推送消息 | 作为父母，我希望回顾之前错过的消息 |
| **快速预览** | 不进入详情即可预览内容 | 作为父母，我希望快速浏览不打断工作 |

#### F2.5: 实时推送通知（v4.0 新增）

> **更新日期**：2025-02-09
> **重要性**：三层信息架构的第一层，即时触达家长

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **情绪告警推送** | 检测到孩子哭泣/极度低落时立即推送 | 作为父母，孩子情绪异常时我想第一时间知道 |
| **孩子金句推送** | 孩子说了暖心/有趣/有教育意义的话时推送 | 作为父母，我想在忙碌中收到孩子的可爱瞬间 |
| **好奇心爆发推送** | 孩子连续问同一话题≥3个问题时推送 | 作为父母，我想了解孩子正在对什么感兴趣 |
| **推送频率控制** | 每天最多5条推送，避免打扰 | 作为父母，我不想被过多推送打扰 |
| **推送历史查看** | 查看历史推送记录 | 作为父母，我想回顾之前的推送消息 |

#### F2.7: 个人记忆图谱系统（v5.0 新增）

> **更新日期**：2026-02-09
> **重要性**：记录Tab核心重构，从话题索引升级为结构化记忆系统
> **数据来源**：双模融合 — 主动对话(⭐高优先) + 被动监听(📎背景)

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **👥 人物图谱** | 孩子提到的所有人的关系档案（声纹+语义双重识别） | 作为父母，我想知道孩子的社交世界里都有谁 |
| **💛 情绪档案** | 情绪模式识别，用叙事而非标签呈现 | 作为父母，我想理解孩子的情绪规律而非只看今天的心情 |
| **🔭 兴趣图谱** | 兴趣的演变轨迹和深度评估 | 作为父母，我想知道孩子的兴趣在往哪个方向发展 |
| **🌱 成长足迹** | AI自动识别的关键成长里程碑 | 作为父母，我想看到孩子每一个值得记住的进步 |
| **⚡ 正在经历** | 持续追踪的挑战和困扰 | 作为父母，我想知道哪些问题需要持续关注 |
| **🌍 小小世界观** | 孩子对世界的理解和"理论" | 作为父母，我想看到孩子如何理解这个世界 |
| **✨ 新动态推送** | 4级分级推送（即时/当日/周更/惊喜） | 作为父母，我想知道什么时候该去看记忆图谱的新发现 |
| **家长确认** | 家长可确认/补充AI识别的人物和事件 | 作为父母，我想帮助AI更准确地理解孩子 |

**双模数据说明（后端逻辑，前端不暴露数据来源）**：
- **主动对话**：孩子按按钮主动说的话，后端标记为高优先，影响排序权重
- **被动监听**：设备始终在线记录的环境声音，AI提取后作为背景佐证
- 两种数据由AI融合后统一呈现给家长，家长无需关心信息来源

**人物识别技术路径**：
- 语义提取：从孩子话语中提取人名和关系（"小红说她不想跟我玩了"）
- 声纹建档：被动监听模式下自动识别反复出现的声音
- AI追问：对话中自然追问确认模糊指代
- 家长辅助：APP端确认和补充人物信息

**情绪呈现原则**：
- 不显示"情绪标签(87%)"这类冷冰冰的数据
- 用叙事性语言：💛 "小明今天说话比平时安静一些，聊到幼儿园时停顿了好几次"
- 三层融合：语义内容(★★★★★) + 语音语调(★★★☆☆) + 行为模式(★★★★☆)

#### F3: 每日成长报告（v4.0 升级）

> **更新日期**：2025-02-09
> **重大升级**：新增三层信息架构、渐进式披露、历史对比、家长反馈闭环

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **今日亮点** | 一句话叙事性总结，情感钩子（v4.0新增） | 作为父母，我希望打开报告就被吸引继续看 |
| **今日概览** | 30秒快速了解+历史对比数据 | 作为父母，我希望快速了解孩子的一天和趋势 |
| **今日对话** | 按时间排列的对话记录和情绪标注 | 作为父母，我希望"听到"孩子说了什么 |
| **孩子的世界** | 标签页切换：心情/朋友/兴趣/困扰（v4.0改进） | 作为父母，我希望从多维度了解孩子 |
| **值得关注** | 需要父母留意的事+场景化AI入口（v4.0新增） | 作为父母，我不想错过重要的事 |
| **今晚行动** | 具体怎么做、怎么聊+对话示例 | 作为父母，我希望知道怎么和孩子沟通 |
| **亲子对话建议** | 个性化话题和资源推荐（v4.0改进） | 作为父母，我希望有针对性的对话话题 |
| **家长反馈** | 评分+文字反馈+报告局限说明（v4.0新增） | 作为父母，我希望报告越来越准确 |
| **渐进式披露** | 三级展开：推送3秒/概览30秒/完整5分钟 | 作为父母，无论多忙都能快速了解 |

#### F4: 孩子档案

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **基本信息** | 姓名、昵称、生日、性别 | 作为父母，我希望AI了解我的孩子 |
| **成长档案** | 长期积累的成长数据 | 作为父母，我希望记录孩子的成长轨迹 |
| **兴趣标签** | AI自动识别的孩子兴趣 | 作为父母，我希望了解孩子的兴趣变化 |

### 2.2 重要功能（P1 - Should Have）

#### F5: 周报/月报

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **周度总结** | 本周成长亮点和关注点 | 作为父母，我希望看到孩子一周的变化 |
| **月度总结** | 本月成长轨迹和趋势 | 作为父母，我希望看到更长期的成长 |
| **对比分析** | 与上周/上月的对比 | 作为父母，我希望看到孩子的进步 |
| **成长里程碑** | 重要的成长节点标记 | 作为父母，我希望记住孩子的重要时刻 |

#### F6: 育儿问答

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **AI问答** | 向AI提问育儿问题 | 作为父母，我希望随时获得育儿建议 |
| **情境问答** | 结合孩子档案的个性化回答 | 作为父母，我希望建议是针对我孩子的 |
| **问题收藏** | 收藏有用的问答 | 作为父母，我希望保存有价值的建议 |

#### F7: 家庭成员

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **邀请成员** | 邀请家人加入 | 作为父母，我希望和家人一起关注孩子 |
| **权限管理** | 设置不同角色的权限 | 作为父母，我希望控制谁能看到什么 |
| **多孩子** | 支持多个孩子档案 | 作为父母，我希望管理多个孩子 |

#### F7.5: 成长瞬间收藏（v4.0 新增）

| 功能点 | 描述 | 用户故事 |
|--------|------|---------|
| **金句收藏** | 收藏孩子说的暖心/有趣的话 | 作为父母，我希望保存孩子的精彩语录 |
| **事件收藏** | 收藏报告中的重要事件 | 作为父母，我希望标记重要的成长瞬间 |
| **收藏夹查看** | 按时间线查看所有收藏 | 作为父母，我希望回顾收藏的美好瞬间 |

### 2.3 增强功能（P2 - Nice to Have）

#### F7.8: 成长里程碑自动发现（v4.0 新增）

| 功能点 | 描述 |
|--------|------|
| **里程碑检测** | AI自动识别孩子的成长里程碑（首次换位思考、首次主动道歉等） |
| **里程碑通知** | 发现里程碑时推送给家长 |
| **里程碑档案** | 所有里程碑汇总查看，配发展心理学解读 |

#### F8: 搜索与回顾

| 功能点 | 描述 |
|--------|------|
| **关键词搜索** | 搜索历史记录和报告 |
| **日历视图** | 按日期浏览历史 |
| **话题筛选** | 按话题筛选内容 |

#### F9: 数据导出

| 功能点 | 描述 |
|--------|------|
| **报告导出** | 导出报告为PDF |
| **数据备份** | 备份孩子成长数据 |

#### F10: 个性化设置

| 功能点 | 描述 |
|--------|------|
| **推送设置** | 自定义推送频率和时间 |
| **报告偏好** | 自定义报告内容偏好 |
| **隐私设置** | 数据隐私控制 |

---

## 三、功能优先级矩阵

```
                    用户价值
                      高
                       │
           ┌──────────┼──────────┐
           │  P1      │   P0     │
           │  周报    │   每日报告 │
           │  问答    │   设备管理 │
           │  家庭    │   实时消息 │
           │  收藏    │   孩子档案 │
           │          │   实时推送 │
    实现   ├──────────┼──────────┤ 实现
    难度   │  P2      │   -      │ 难度
    高     │  搜索    │          │ 低
           │  导出    │          │
           │  设置    │          │
           │  里程碑  │          │
           │          │          │
           └──────────┴──────────┘
                       │
                      低
                    用户价值
```

---

## 四、MVP功能范围

### 4.1 MVP必须包含

| 功能 | 原因 |
|------|------|
| **设备配对** | 没有配对就无法使用 |
| **设备状态** | 用户需要知道设备是否正常 |
| **实时消息** | 核心价值的即时体现 |
| **实时推送** | 三层信息架构的即时触达层，情绪告警+金句推送 |
| **每日报告** | 核心价值的完整体现 |
| **孩子档案** | AI个性化的基础 |
| **互动建议** | 差异化价值的关键 |

### 4.2 MVP可延后

| 功能 | 延后原因 |
|------|---------|
| 周报/月报 | 需要积累数据才有意义 |
| 育儿问答 | 报告中已包含建议 |
| 家庭成员 | 单用户足够验证价值 |
| 搜索回顾 | 数据量少时不急需 |
| 数据导出 | 非核心功能 |

### 4.3 MVP功能完整列表（3 Tab架构）

> **更新日期**：2025-02-05
> **架构变更**：从4-5 Tab简化为3 Tab

```
┌─────────────────────────────────────────────────────────────┐
│                    MVP APP 功能清单（3 Tab）                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🏠 首页 (Home)                                              │
│  ├── 设备状态胶囊（在线/电量/信号）                           │
│  ├── 今日报告总览                                            │
│  │   ├── 一句话总结                                          │
│  │   ├── 情绪状态                                            │
│  │   └── 话题标签                                            │
│  ├── 今日精选动态（2-3条关键对话）                            │
│  ├── 互动策略卡片 ⭐                                         │
│  │   ├── 针对事件的育儿建议                                  │
│  │   └── 对话模板（可复制）                                  │
│  └── 实时推送通知入口 ⭐⭐                                      │
│      ├── 情绪告警推送                                           │
│      ├── 孩子金句推送                                           │
│      └── 好奇心爆发推送                                         │
│                                                             │
│  💬 记录 (Records) - 个人记忆图谱系统 ⭐⭐⭐                  │
│  ├── ✨ 新动态推送                                           │
│  │   ├── 🔴 即时告警（情绪异常/安全信号）                      │
│  │   ├── 🟡 当日高亮（新洞察发现）                            │
│  │   ├── 🟢 周更趋势（关系变化/里程碑）                       │
│  │   └── 💎 惊喜成就（成长突破）                              │
│  ├── 📁 记忆图谱（6个维度）                                  │
│  │   ├── 👥 人物图谱（社交关系网络）                          │
│  │   ├── 💛 情绪档案（情绪模式与规律）                        │
│  │   ├── 🔭 兴趣图谱（兴趣演变与深度）                       │
│  │   ├── 🌱 成长足迹（关键里程碑）                            │
│  │   ├── ⚡ 正在经历（持续挑战追踪）                          │
│  │   └── 🌍 小小世界观（孩子的世界理解）                      │
│  ├── AI对话入口 ⭐⭐                                         │
│  │   ├── 文字/语音输入                                       │
│  │   └── 可查询记忆图谱全部数据                              │
│  └── 数据融合（后端逻辑，前端统一呈现）                       │
│      ├── 主动对话内容后端标记高优先，影响排序权重              │
│      └── 被动监听内容由AI融合后自然呈现                       │
│                                                             │
│  👤 我的 (Mine)                                              │
│  ├── 孩子管理                                                │
│  │   ├── 基本信息（姓名/生日）                               │
│  │   └── 兴趣标签（AI自动识别）                              │
│  ├── 设备管理                                                │
│  │   ├── 设备状态                                            │
│  │   ├── 流量管理/续费                                       │
│  │   └── 固件更新                                            │
│  ├── 通知设置                                                │
│  ├── 隐私设置                                                │
│  ├── 账号设置                                                │
│  └── 帮助与关于                                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.4 3 Tab设计理念

| Tab | 定位 | 用户场景 |
|-----|------|---------|
| **首页** | 快速了解 | "看一眼就知道孩子今天怎么了，怎么和他聊" |
| **记录** | 深度了解 | "我想从6个维度深入了解孩子的内心世界" |
| **我的** | 管理配置 | "设备、账号等低频操作" |

---

## 五、功能详细规格

### 5.1 每日报告详细结构

```
┌─────────────────────────────────────────────────────────────┐
│                    每日成长报告结构                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  报告头部                                                    │
│  ├── 日期：2025年2月5日 星期三                               │
│  ├── 孩子：小明                                              │
│  └── 数据来源：今日对话 32分钟                                │
│                                                             │
│  ────────────────────────────────────────────               │
│                                                             │
│  📝 今日总结                                                 │
│  │                                                          │
│  │  "今天小明在幼儿园度过了愉快的一天。他和好朋友小红一起        │
│  │   玩了积木，还学会了一首新儿歌。下午他问了很多关于恐龙        │
│  │   的问题，看来他最近对恐龙很感兴趣。"                       │
│  │                                                          │
│  ────────────────────────────────────────────               │
│                                                             │
│  🎯 关键事件                                                 │
│  │                                                          │
│  │  [积极] 和小红一起搭了一座很高的积木城堡                    │
│  │  [好奇] 问了5个关于恐龙的问题                              │
│  │  [关注] 提到不想午睡，有点抗拒                              │
│  │                                                          │
│  ────────────────────────────────────────────               │
│                                                             │
│  😊 情绪状态                                                 │
│  │                                                          │
│  │  整体情绪：开心 😊                                        │
│  │  情绪分布：开心 60% | 好奇 30% | 平静 10%                  │
│  │  情绪说明：今天小明整体情绪很好，对新事物充满好奇           │
│  │                                                          │
│  ────────────────────────────────────────────               │
│                                                             │
│  💡 话题热点                                                 │
│  │                                                          │
│  │  #恐龙  #积木  #幼儿园  #小红  #儿歌                       │
│  │                                                          │
│  ────────────────────────────────────────────               │
│                                                             │
│  ⭐ 互动建议（核心价值）                                      │
│  │                                                          │
│  │  💬 关于恐龙的兴趣                                        │
│  │  ├── 建议：趁热打铁，可以给孩子看恐龙科普绘本               │
│  │  ├── 话题切入："我听说你今天问了好多恐龙的问题，              │
│  │  │             你最喜欢哪种恐龙呀？"                       │
│  │  └── 延伸活动：周末可以去自然博物馆看恐龙化石               │
│  │                                                          │
│  │  💬 关于不想午睡                                          │
│  │  ├── 建议：了解原因，可能是不困或有其他想法                 │
│  │  ├── 话题切入："听说你今天不太想午睡，是不是有               │
│  │  │             什么好玩的事情不想错过呀？"                  │
│  │  └── 注意事项：不要批评，先倾听                            │
│  │                                                          │
│  ────────────────────────────────────────────               │
│                                                             │
│  📖 对话模板                                                 │
│  │                                                          │
│  │  场景：晚饭后和孩子聊天                                    │
│  │                                                          │
│  │  开场白：                                                 │
│  │  "今天在幼儿园开心吗？听说你和小红一起搭积木了，              │
│  │   你们搭了什么呀？"                                       │
│  │                                                          │
│  │  深入话题：                                               │
│  │  "哇，城堡！那城堡里住着谁呢？是恐龙吗？                    │
│  │   我听说你最近很喜欢恐龙呢~"                               │
│  │                                                          │
│  │  引导表达：                                               │
│  │  "你最喜欢哪种恐龙？为什么喜欢它呀？"                       │
│  │                                                          │
│  └─────────────────────────────────────────                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 互动建议的价值定位

```
┌─────────────────────────────────────────────────────────────┐
│                  互动建议 - 核心差异化价值                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  传统产品：                                                  │
│  ┌─────────────────────────────────────────┐                │
│  │  只告诉你孩子做了什么                      │                │
│  │  "今天孩子问了关于死亡的问题"               │                │
│  │                                          │                │
│  │  然后呢？家长不知道怎么办                   │                │
│  └─────────────────────────────────────────┘                │
│                                                             │
│                       ▼                                     │
│                                                             │
│  小星伴：                                                    │
│  ┌─────────────────────────────────────────┐                │
│  │  不仅告诉你孩子做了什么                    │                │
│  │  还告诉你应该怎么回应                      │                │
│  │                                          │                │
│  │  "今天孩子问了关于死亡的问题"               │                │
│  │                                          │                │
│  │  💡 建议：                                │                │
│  │  这是孩子认知发展的正常阶段，不要回避       │                │
│  │                                          │                │
│  │  💬 话题切入：                            │                │
│  │  "你是不是想知道人为什么会死呀？            │                │
│  │   这个问题很好，我们一起聊聊好吗？"         │                │
│  │                                          │                │
│  │  📚 参考：                                │                │
│  │  推荐绘本《爷爷变成了幽灵》                 │                │
│  └─────────────────────────────────────────┘                │
│                                                             │
│  价值：从"了解"到"行动"，让父母知道下一步做什么                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 六、技术约束

### 6.1 平台要求

| 平台 | 最低版本 | 说明 |
|------|---------|------|
| iOS | iOS 14.0+ | 覆盖95%以上用户 |
| Android | Android 8.0+ | 覆盖90%以上用户 |

### 6.2 性能要求

| 指标 | 目标值 |
|------|--------|
| 启动时间 | <3秒 |
| 页面切换 | <300ms |
| 报告加载 | <2秒 |
| 推送延迟 | <5秒 |

### 6.3 离线能力

| 功能 | 离线支持 |
|------|---------|
| 查看历史报告 | ✅ 支持 |
| 设备配对 | ❌ 需要网络 |
| 接收推送 | ❌ 需要网络 |
| 浏览孩子档案 | ✅ 支持 |

---

## 七、下一步

1. **用户旅程设计** → `02-user-journey.md`
2. **信息架构设计** → `03-information-architecture.md`
3. **线框图设计** → `04-wireframes.md`
